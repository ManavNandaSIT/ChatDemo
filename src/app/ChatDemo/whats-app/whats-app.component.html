<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css" />
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<!------ Include the above in your HEAD tag ---------->

<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css" />
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<!doctype html>
<html class="">
  <head>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,300" rel="stylesheet" type="text/css" />
    <link rel="stylesheet prefetch" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" /><link
      rel="stylesheet prefetch"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css"
    />
  </head>
  <body>
    <div id="frame">
      <div id="sidepanel">
        <div id="profile">
          <div class="wrap">
            <img id="profile-img" src="http://emilcarlsson.se/assets/mikeross.png" class="online" alt="" />
            <p>{{UserName}}</p>
            <i class="fa fa-chevron-down expand-button" aria-hidden="true"></i>
            <div id="status-options">
              <ul>
                <li id="status-online" class="active"><span class="status-circle"></span> <p>Online</p></li>
                <li id="status-away"><span class="status-circle"></span> <p>Away</p></li>
                <li id="status-busy"><span class="status-circle"></span> <p>Busy</p></li>
                <li id="status-offline"><span class="status-circle"></span> <p>Offline</p></li>
              </ul>
            </div>
            <div id="expanded">
              <label for="twitter"><i class="fa fa-facebook fa-fw" aria-hidden="true"></i></label>
              <input name="twitter" type="text" value="mikeross" />
              <label for="twitter"><i class="fa fa-twitter fa-fw" aria-hidden="true"></i></label>
              <input name="twitter" type="text" value="ross81" />
              <label for="twitter"><i class="fa fa-instagram fa-fw" aria-hidden="true"></i></label>
              <input name="twitter" type="text" value="mike.ross" />
            </div>
          </div>
        </div>
        <div id="search">
          <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
          <input type="text" placeholder="Search contacts..." />
        </div>
        <div id="contacts">


          <ul *ngFor="let user  of combinedData" >
            <!--All Contacts Lists Here   -->
            <li class="contact" >
              <div class="wrap" (click)="GetReceiverData(user)">
                <span [ngClass]="{'contact-status online': user.isOnline ,'contact-status offline': !user.isOnline}"></span> 
                <img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />
                <div class="meta">
                  <p class="name">{{user.firstName}} <a *ngIf="user.noOfUnreadMessages>0" href="javascript:void(0);" class="ms-1 p-1 UnreadMessages text-center">{{user.noOfUnreadMessages}}</a> </p>
                  
                  <p *ngIf="!user.isOnline" class="preview">Last Seen {{user.lastStatus | date : 'MMM dd, YYYY'}}</p>
                  <!-- && user.lastStatus!=='1900-01-01T00:00:00'; -->
                  <!-- else LastSeen -->
                  <!-- <ng-template #LastSeen class="preview">
                        Last Seen Year Ago
                  </ng-template> -->
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div id="bottom-bar">
          <button id="addcontact"><i class="fa fa-user-plus fa-fw" aria-hidden="true"></i> <span>Add contact</span></button>
          <button id="settings"><i class="fa fa-cog fa-fw" aria-hidden="true"></i> <span>Settings</span></button>
        </div>
      </div>

      <!-- If Receiver Is Not Selected -->
      <div *ngIf="!OnceReceiverConnected" class="content text-center">
        <h1 class="mt-3 NoReceiverHead p-2">Lets Start The Conversation   <i class="fa fa-comments-o" aria-hidden="true"></i></h1>
        <iframe  src="https://giphy.com/embed/YoOM0hliors7cLsgmk" width="480" height="480" frameBorder="0" class="giphy-embed mt-4" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/tmkoc-jethalal-tarak-mehta-ka-ulta-chashma-YoOM0hliors7cLsgmk">via GIPHY</a></p>
        <h1 class="mt-3 NoReceiverHead p-2">Watch Gifs If Dont Want To Chat !!!</h1>
      </div>


      <!-- if receiver Is Selected -->
      <div *ngIf="OnceReceiverConnected" class="content">
        <div class="contact-profile">
          <img src="http://emilcarlsson.se/assets/harveyspecter.png" alt="" />
          <p>{{ReceiverName}}  <span *ngIf="StatusTyping!=''">{{StatusTyping}}</span></p>
          <div class="social-media">
            <i class="fa fa-facebook" aria-hidden="true"></i>
            <i class="fa fa-twitter" aria-hidden="true"></i>
             <i class="fa fa-instagram" aria-hidden="true"></i>
          </div>
        </div>
        <div #chatMessagesContainer class="messages" *ngIf="ReceiverId>0" >
          <ul  *ngFor="let msg of OldHistoryMessage; let Id = index">

            <div class="msg" *ngIf="Id > 0 ? sameDates(msg.createdDate, OldHistoryMessage[Id-1].createdDate): true">
              <div class="text-center Date">{{msg.createdDate | date : 'MMM dd, YYYY'}}</div>
              </div>


            <li   [ngClass]="{'replies': msg.fromUserId == UserId, 'sent': msg.fromUserId != UserId}">
              <img src="http://emilcarlsson.se/assets/mikeross.png" alt="" />
              <p>   {{convertUnicodeEmojiToEmoji(msg.message) }}</p>
            </li>
            <!-- <li class="">
              <img src="http://emilcarlsson.se/assets/harveyspecter.png" alt="" />
              <p>When you're backed against the wall, break the god damn thing down.</p>
            </li> -->

          </ul>
          <ul  *ngFor="let msg of OneToOneChatMessage">
            <li   [ngClass]="{'replies': msg.fromUserId == UserId, 'sent': msg.fromUserId != UserId}">
              <img src="http://emilcarlsson.se/assets/mikeross.png" alt="" />
              <p>  {{convertUnicodeEmojiToEmoji(msg.message) }}</p>
            </li>
          </ul>
        </div>
        <div class="message-input">
          <div class="wrap">
            <span *ngIf="Emoji"><app-emoji-picker (addEmojiToMessage)="MessageSet($event,true)"></app-emoji-picker></span> 
          <input type="text" #SendMessage oninput="this.value = this.value.replace(/^\s+/g, '')" 
          [value]="txtMessage" (keyup)="MessageSet($event,false)" (focusout)="SetUserTypinStatus(false, $event)" (focus)="SetUserTypinStatus(true, $event)" 
            (keydown.enter)="sendMessage()"/>
          <!-- <i class="fa fa-paperclip attachment" aria-hidden="true"></i> -->
          <i  (click)="EmojiEnable()" class="fa-solid fa-face-laugh mt-2 ms-2 p-1" aria-hidden="true"></i>
          <button class="submit" (click)="sendMessage()"><i class="fa fa-paper-plane" aria-hidden="true"></i></button>
          </div>
        </div>
      </div> 
    </div>
 
    <script src="//production-assets.codepen.io/assets/common/stopExecutionOnTimeout-b2a7b3fe212eaa732349046d8416e00a9dec26eb7fd347590fbced3ab38af52e.js"></script
    ><script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  </body>
</html>
